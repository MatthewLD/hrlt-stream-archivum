<!DOCTYPE html>
<!-- saved from url=(0045)http://matthewld.web.elte.hu/web1/videos.html -->
<html lang="hu">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<link rel="stylesheet" type="text/css" href="Final Result.css" title="default">

</head>

<body>
	<!--StatsAfterGame-->
	<div id="stats">
		<div id="seriesScoreBg" class="seriesScoreBg">
			<img id="seriesScoreBgIMG" src="Grafikák/statsSeriesScoreBg.png">
		</div>

		<div id="blueLogoSeries" class="blueLogoSeries">
			<img id="blueLogoSeriesId" src="../Logo/MTK Budapest.png">
		</div>

		<div class="blueSeriesWin" id="blueSeriesWin">
			<pre">4</pre>
		</div>

		<div class="seriesType" id="seriesType">
			<pre">Best of 7</pre>
		</div>

		<div class="orangeSeriesWin" id="orangeSeriesWin">
			<pre">1</pre>
		</div>

		<div id="orangeLogoSeries" class="orangeLogoSeries">
			<img id="orangeLogoSeriesId" src="../Logo/Future Esports.png">
		</div>

		<div id="baseMVP" class="baseMVP">
			<img id="baseMVPIMG" src="Grafikák/base MVP.png">
		</div>

		<div id="winnerTeamLogo" class="winnerTeamLogo">
			<img id="winnerTeamLogoId" src="../Logo/MTK Budapest.png">
		</div>

		<div id="loserTeamLogo" class="loserTeamLogo">
			<img id="loserTeamLogoId" src="../Logo/Future Esports.png">
		</div>

		<!--<iframe id="winnerTeam" class="winnerTeam" src="file:///X:/HTML/Stats/winnerstats.html"></iframe>-->
		<!--winnerTeam-->
		<div id="winnerTeam" class="winnerTeam">
			<div id="statsBg_w" class="statsBg">
				<img id="statsBgId_w" src="Grafikák/blueStatsBg.png">
			</div>

			<div class="player1" id="player1_w">
				<pre">CokeHUN</pre>
			</div>

			<div class="goals" id="goals_w">
				<pre">5</pre>
			</div>

			<div class="teamName" id="teamName_w">
				<pre">Budapest Five</pre>
			</div>

			<div class="player1_points" id="player1_points_w">
				<pre">601</pre>
			</div>

			<div class="player1_goals" id="player1_goals_w">
				<pre">3</pre>
			</div>

			<div class="player1_assists" id="player1_assists_w">
				<pre">1</pre>
			</div>

			<div class="player1_saves" id="player1_saves_w">
				<pre">1</pre>
			</div>

			<div class="player1_shots" id="player1_shots_w">
				<pre">3</pre>
			</div>

			<div class="player1_demos" id="player1_demos_w">
				<pre">-</pre>
			</div>

			<div class="player1_demoed" id="player1_demoed_w">
				<pre">-</pre>
			</div>

			<div class="player2" id="player2_w">
				<pre">Negsy</pre>
			</div>

			<div class="player2_points" id="player2_points_w">
				<pre">461</pre>
			</div>

			<div class="player2_goals" id="player2_goals_w">
				<pre">1</pre>
			</div>

			<div class="player2_assists" id="player2_assists_w">
				<pre">1</pre>
			</div>

			<div class="player2_saves" id="player2_saves_w">
				<pre">2</pre>
			</div>

			<div class="player2_shots" id="player2_shots_w">
				<pre">2</pre>
			</div>

			<div class="player2_demos" id="player2_demos_w">
				<pre">-</pre>
			</div>

			<div class="player2_demoed" id="player2_demoed_w">
				<pre">-</pre>
			</div>

		</div>

		<!--<iframe id="loserTeam" class="loserTeam" src="file:///X:/HTML/Stats/loserstats.html"></iframe>-->
		<!--Loser team-->
		<div id="loserTeam" class="loserTeam">
			<div id="statsBg_l" class="statsBg">
				<img id="statsBgId_l" src="Grafikák/orangeStatsBg.png">
			</div>

			<div class="goals" id="goals_l">
				<pre">0</pre>
			</div>

			<div class="teamName" id="teamName_l">
				<pre">WiLD MultiGaming</pre>
			</div>

			<div class="player1" id="player1_l">
				<pre">trolley</pre>
			</div>

			<div class="player1_points" id="player1_points_l">
				<pre">316</pre>
			</div>

			<div class="player1_goals" id="player1_goals_l">
				<pre">0</pre>
			</div>

			<div class="player1_assists" id="player1_assists_l">
				<pre">0</pre>
			</div>

			<div class="player1_saves" id="player1_saves_l">
				<pre">2</pre>
			</div>

			<div class="player1_shots" id="player1_shots_l">
				<pre">1</pre>
			</div>

			<div class="player1_demos" id="player1_demos_l">
				<pre">-</pre>
			</div>

			<div class="player1_demoed" id="player1_demoed_l">
				<pre">-</pre>
			</div>

			<div class="player2" id="player2_l">
				<pre">Kriszcsön.</pre>
			</div>

			<div class="player2_points" id="player2_points_l">
				<pre">289</pre>
			</div>

			<div class="player2_goals" id="player2_goals_l">
				<pre">0</pre>
			</div>

			<div class="player2_assists" id="player2_assists_l">
				<pre">0</pre>
			</div>

			<div class="player2_saves" id="player2_saves_l">
				<pre">2</pre>
			</div>

			<div class="player2_shots" id="player2_shots_l">
				<pre">3</pre>
			</div>

			<div class="player2_demos" id="player2_demos_l">
				<pre">-</pre>
			</div>

			<div class="player2_demoed" id="player2_demoed_l">
				<pre">-</pre>
			</div>
		</div>
	</div>


	<!--Eredeti fájl-->

	<script src="http://absolute/Y:/JS/Updater.js"></script>
	<script src="http://absolute/Y:/JS/regex-operation.js"></script>

	<script>
		var blueGoals = 0;
		var orangeGoals = 0;

		function connectToBakkesmod() {
			const WsSubscribers = {
				__subscribers: {},
				websocket: undefined,
				webSocketConnected: false,
				registerQueue: [],
				init: function (port, debug, debugFilters) {
					port = port || 49322;
					debug = debug || false;
					if (debug) {
						if (debugFilters !== undefined) {
							console.warn("WebSocket Debug Mode enabled with filtering. Only events not in the filter list will be dumped");
						} else {
							console.warn("WebSocket Debug Mode enabled without filters applied. All events will be dumped to console");
							console.warn("To use filters, pass in an array of 'channel:event' strings to the second parameter of the init function");
						}
					}
					WsSubscribers.webSocket = new WebSocket("ws://localhost:" + port);
					WsSubscribers.webSocket.onmessage = function (event) {
						let jEvent = JSON.parse(event.data);
						if (!jEvent.hasOwnProperty('event')) {
							return;
						}
						let eventSplit = jEvent.event.split(':');
						let channel = eventSplit[0];
						let event_event = eventSplit[1];
						if (debug) {
							if (!debugFilters) {
								console.log(channel, event_event, jEvent);
							} else if (debugFilters && debugFilters.indexOf(jEvent.event) < 0) {
								console.log(channel, event_event, jEvent);
							}
						}
						WsSubscribers.triggerSubscribers(channel, event_event, jEvent.data);
					};
					WsSubscribers.webSocket.onopen = function () {
						WsSubscribers.triggerSubscribers("ws", "open");
						WsSubscribers.webSocketConnected = true;
						WsSubscribers.registerQueue.forEach((r) => {
							WsSubscribers.send("wsRelay", "register", r);
						});
						WsSubscribers.registerQueue = [];
					};
					WsSubscribers.webSocket.onerror = function () {
						WsSubscribers.triggerSubscribers("ws", "error");
						WsSubscribers.webSocketConnected = false;
					};
					WsSubscribers.webSocket.onclose = function () {
						WsSubscribers.triggerSubscribers("ws", "close");
						WsSubscribers.webSocketConnected = false;
						console.log("Could not connect to bakkesmod. Trying to reconnect...");
						setTimeout(function () {
							connectToBakkesmod();
						}, 1000);
					};
				},
				/**
				 * Add callbacks for when certain events are thrown
				 * Execution is guaranteed to be in First In First Out order
				 * @param channels
				 * @param events
				 * @param callback
				 */
				subscribe: function (channels, events, callback) {
					if (typeof channels === "string") {
						let channel = channels;
						channels = [];
						channels.push(channel);
					}
					if (typeof events === "string") {
						let event = events;
						events = [];
						events.push(event);
					}
					channels.forEach(function (c) {
						events.forEach(function (e) {
							if (!WsSubscribers.__subscribers.hasOwnProperty(c)) {
								WsSubscribers.__subscribers[c] = {};
							}
							if (!WsSubscribers.__subscribers[c].hasOwnProperty(e)) {
								WsSubscribers.__subscribers[c][e] = [];
								if (WsSubscribers.webSocketConnected) {
									WsSubscribers.send("wsRelay", "register", `${c}:${e}`);
								} else {
									WsSubscribers.registerQueue.push(`${c}:${e}`);
								}
							}
							WsSubscribers.__subscribers[c][e].push(callback);
						});
					})
				},
				clearEventCallbacks: function (channel, event) {
					if (WsSubscribers.__subscribers.hasOwnProperty(channel) && WsSubscribers.__subscribers[channel].hasOwnProperty(event)) {
						WsSubscribers.__subscribers[channel] = {};
					}
				},
				triggerSubscribers: function (channel, event, data) {
					if (WsSubscribers.__subscribers.hasOwnProperty(channel) && WsSubscribers.__subscribers[channel].hasOwnProperty(event)) {
						WsSubscribers.__subscribers[channel][event].forEach(function (callback) {
							if (callback instanceof Function) {
								callback(data);
							}
						});
					}
				},
				send: function (channel, event, data) {
					if (typeof channel !== 'string') {
						console.error("Channel must be a string");
						return;
					}
					if (typeof event !== 'string') {
						console.error("Event must be a string");
						return;
					}
					if (channel === 'local') {
						this.triggerSubscribers(channel, event, data);
					} else {
						let cEvent = channel + ":" + event;
						WsSubscribers.webSocket.send(JSON.stringify({
							'event': cEvent,
							'data': data
						}));
					}
				}
			};

			var started = false;

			$(() => {
				WsSubscribers.init(49322, false);
				WsSubscribers.subscribe("game", "update_state", (d) => {
					if (started) {
						let target = d['players'];
						saveStats(target);
						blueGoals = Number(d['game']['teams'][0]['score']);
						orangeGoals = Number(d['game']['teams'][1]['score']);
					}
				});

				WsSubscribers.subscribe("game", "match_ended", (d) => {
					started = false;
					handleFinalResult(playerNames, playerStats, Number(d["winner_team_num"]));
				});

				WsSubscribers.subscribe("game", "match_destroyed", (d) => {
					started = false;
				});

				WsSubscribers.subscribe("game", "round_started_go", (d) => {
					if (!started) {
						playersForDemos = [];
						demos = [];

						playersForDemoer = [];
						demoer = [];

						playerNames = new Array();
						playerStats = new Array();

						started = true;
					}
				});

				WsSubscribers.subscribe("game", "statfeed_event", (d) => {
					if (d['type'] === 'Demolition') {
						addNewDemoer(d['main_target']['id']);
						addNewDemo(d['secondary_target']['id']);
					}
				});
			});
		}

		var playersForDemos = [];
		var demos = [];

		var playersForDemoer = [];
		var demoer = [];

		function addNewDemoer(playerName) {
			var added = false;
			for (var i = 0; i < playersForDemoer.length && !added; i++) {
				if (playersForDemoer[i] === playerName) {
					demoer[i]++;
					added = true;
				}
			}
			if (!added) {
				playersForDemoer.push(playerName);
				demoer.push(1);
			}
		}

		function addNewDemo(playerName) {
			var added = false;
			for (var i = 0; i < playersForDemos.length && !added; i++) {
				if (playersForDemos[i] === playerName) {
					demos[i]++;
					added = true;
				}
			}
			if (!added) {
				playersForDemos.push(playerName);
				demos.push(1);
			}
		}

		function getDemoerNumber(playerName) {
			for (var i = 0; i < playersForDemoer.length; i++) {
				if (playersForDemoer[i] === playerName) {
					return demoer[i];
				}
			}
			return 0;
		}

		function getDemoNumber(playerName) {
			for (var i = 0; i < playersForDemos.length; i++) {
				if (playersForDemos[i] === playerName) {
					return demos[i];
				}
			}
			return 0;
		}


		var playerNames = new Array();
		var playerStats = new Array();
		let blueWin = 0;
		let orangeWin = 0;

		connectToBakkesmod();

		function saveStats(target) {
			Object.keys(target).forEach(function (key) {
				var input = target[key];
				var id = input["id"];
				var team = id.split("_")[id.split("_").length - 1];
				var name = input["name"];
				var goals = input["goals"];
				var assists = input["assists"];
				var saves = input["saves"];
				var shot = input["shots"];
				var points = input["score"];
				var demos = getDemoerNumber(id);
				var demoed = getDemoNumber(id);

				var addedName = false;

				var arrToAdd = new Array();
				arrToAdd.push(Number(team));
				arrToAdd.push(goals);
				arrToAdd.push(assists);
				arrToAdd.push(saves);
				arrToAdd.push(shot);
				arrToAdd.push(points);
				arrToAdd.push(demos);
				arrToAdd.push(demoed);

				for (let i = 0; i < playerNames.length && !addedName; i++) {
					if (playerNames[i] == name) {
						playerStats[i] = arrToAdd;
						addedName = true;
					}
				}

				if (!addedName) {
					playerNames.push(name);
					playerStats.push(arrToAdd);
				}

				handleFinalResult(playerNames, playerStats, -1);
			});

			/*for(let i=0;i<target.length;i++){
				console.log(target[i]);
			}*/
		}

		function handleFinalResult(playerNames, playerStats, winnerNum) {
			let blueWinStat = blueWin;
			let orangeWinStat = orangeWin;
			if (winnerNum == 0) {
				blueWinStat = blueWinStat + 1;
			}
			else {
				orangeWinStat = orangeWinStat + 1;
			}

			var finishedGame = sum([blueWinStat, orangeWinStat]);
			console.log("blueWinStat = "+blueWinStat+"; orangeWinStat = "+orangeWinStat+"; finishedGame = "+finishedGame);

			/*var video = document.getElementById("hatter");
			video.src = "file:///X:/Studio arénavideók/" + arenas[finishedGame - 1] + ".mp4";
			video.load();
			video.play();*/

			document.getElementById("blueSeriesWin").innerHTML = blueWinStat;
			document.getElementById("orangeSeriesWin").innerHTML = orangeWinStat;

			var blueTeam = new Array();
			var orangeTeam = new Array();

			for (let i = 0; i < playerStats.length; i++) {
				var toAdd = new Array();
				toAdd.push(playerNames[i]);
				toAdd.push(playerStats[i]);

				if (playerStats[i][0] < 5) {
					blueTeam.push(toAdd);
				}
				else {
					orangeTeam.push(toAdd);
				}
			}


			blueTeam = sortTheseResults(blueTeam);
			orangeTeam = sortTheseResults(orangeTeam);

			/*console.log(blueTeam);
			console.log(orangeTeam);*/

			var winner = '';

			if (blueGoals > orangeGoals) {
				winner = 'b';
			}
			else {
				winner = 'o';
			}

			//console.log(document.getElementById("winnerTeam").children);
			/*
		<div id="blueName">0</div>
<div id="orangeName">0</div>
<div id="blueLogoPlace">0</div>
<div id="orangeLogoPlace">0</div>
*/


			if (winner == 'b') {
				document.getElementById("statsBgId_w").src = "Grafikák/blueStatsBg.png";
				document.getElementById("statsBgId_l").src = "Grafikák/orangeStatsBg.png";

				document.getElementById("teamName_w").innerHTML = document.getElementById("blueName").innerHTML;
				document.getElementById("teamName_l").innerHTML = document.getElementById("orangeName").innerHTML;

				document.getElementById("winnerTeamLogoId").src = document.getElementById("blueLogoPlace").innerHTML;
				document.getElementById("loserTeamLogoId").src = document.getElementById("orangeLogoPlace").innerHTML;

				document.getElementById("goals_w").innerHTML = blueGoals;
				document.getElementById("goals_l").innerHTML = orangeGoals;


				writeContentForWinner(blueTeam, "_w");
				writeContentForWinner(orangeTeam, "_l");
			}
			else {
				document.getElementById("statsBgId_w").src = "Grafikák/orangeStatsBg.png";
				document.getElementById("statsBgId_l").src = "Grafikák/blueStatsBg.png";

				document.getElementById("teamName_l").innerHTML = document.getElementById("blueName").innerHTML;
				document.getElementById("teamName_w").innerHTML = document.getElementById("orangeName").innerHTML;

				document.getElementById("loserTeamLogoId").src = document.getElementById("blueLogoPlace").innerHTML;
				document.getElementById("winnerTeamLogoId").src = document.getElementById("orangeLogoPlace").innerHTML;

				document.getElementById("goals_l").innerHTML = blueGoals;
				document.getElementById("goals_w").innerHTML = orangeGoals;

				writeContentForWinner(orangeTeam, "_w");
				writeContentForWinner(blueTeam, "_l");
			}

			/*var iframe = document.getElementById("stats");
			console.log(iframe==null);
			var iframeDocument = iframe.contentDocument || iframe.contentWindow.document;

			if (!iframeDocument) {
				throw "iframe couldn't be found in DOM.";
			}

			console.log(iframeDocument.body);*/
		}

		function sortTheseResults(teamStats) {
			var max = -1;
			for (let i = 0; i < teamStats.length; i++) {
				if (max < teamStats[i][1][5]) {
					max = teamStats[i][1][5];
				}
			}

			var retVal = new Array();

			for (let i = max; i >= 0; i--) {
				var point = i;
				for (let ii = 0; ii < teamStats.length; ii++) {
					var stat = teamStats[ii];
					if (stat[1][5] == point) {
						var found = false;
						for (let iii = 0; iii < retVal.length; iii++) {
							if (retVal[iii][0] == stat[0]) {
								found = true;
							}
						}
						if (!found) {
							retVal.push(stat);
						}
					}
				}
			}

			return retVal;
		}

		function writeContentForWinner(teamStats, postfix) {
			//console.log(teamStats);
			for (let i = 0; i < Math.min(teamStats.length, 2); i++) {
				document.getElementById(concatenate(["player", i + 1, postfix])).innerHTML = teamStats[i][0];
				document.getElementById(concatenate(["player", i + 1, "_goals", postfix])).innerHTML = teamStats[i][1][1];
				document.getElementById(concatenate(["player", i + 1, "_assists", postfix])).innerHTML = teamStats[i][1][2];
				document.getElementById(concatenate(["player", i + 1, "_saves", postfix])).innerHTML = teamStats[i][1][3];
				document.getElementById(concatenate(["player", i + 1, "_shots", postfix])).innerHTML = teamStats[i][1][4];
				document.getElementById(concatenate(["player", i + 1, "_points", postfix])).innerHTML = teamStats[i][1][5];
				document.getElementById(concatenate(["player", i + 1, "_demos", postfix])).innerHTML = teamStats[i][1][6];
				document.getElementById(concatenate(["player", i + 1, "_demoed", postfix])).innerHTML = teamStats[i][1][7];

				document.getElementById(concatenate(["player", i + 1, postfix])).style.opacity = "1.0";
				document.getElementById(concatenate(["player", i + 1, "_goals", postfix])).style.opacity = "1.0";
				document.getElementById(concatenate(["player", i + 1, "_assists", postfix])).style.opacity = "1.0";
				document.getElementById(concatenate(["player", i + 1, "_saves", postfix])).style.opacity = "1.0";
				document.getElementById(concatenate(["player", i + 1, "_shots", postfix])).style.opacity = "1.0";
				document.getElementById(concatenate(["player", i + 1, "_points", postfix])).style.opacity = "1.0";
				document.getElementById(concatenate(["player", i + 1, "_demos", postfix])).style.opacity = "1.0";
				document.getElementById(concatenate(["player", i + 1, "_demoed", postfix])).style.opacity = "1.0";
			}
			for (let i = Math.min(teamStats.length, 2); i < 2; i++) {
				document.getElementById(concatenate(["player", i + 1, postfix])).style.opacity = "0.0";
				document.getElementById(concatenate(["player", i + 1, "_goals", postfix])).style.opacity = "0.0";
				document.getElementById(concatenate(["player", i + 1, "_assists", postfix])).style.opacity = "0.0";
				document.getElementById(concatenate(["player", i + 1, "_saves", postfix])).style.opacity = "0.0";
				document.getElementById(concatenate(["player", i + 1, "_shots", postfix])).style.opacity = "0.0";
				document.getElementById(concatenate(["player", i + 1, "_points", postfix])).style.opacity = "0.0";
				document.getElementById(concatenate(["player", i + 1, "_demos", postfix])).style.opacity = "0.0";
				document.getElementById(concatenate(["player", i + 1, "_demoed", postfix])).style.opacity = "0.0";
			}
		}

		function concatenate(array) {
			var retVal = "";
			for (let i = 0; i < array.length; i++) {
				retVal = retVal + array[i];
			}
			//console.log(retVal);
			return retVal;
		}

		function showBarUnder(coordinate) {
			/*setTimeout(function () {
				if (coordinate >= 0) {
					if (coordinate > 60) {
						showBarUnder(coordinate - 10);
					}
					else if (coordinate > 30) {
						showBarUnder(coordinate - 5);
					}
					else if (coordinate > 5) {
						showBarUnder(coordinate - 2);
					}
					else {
						showBarUnder(coordinate - 1);
					}
				}
				else {
					setTimeout(function () {
						var bg = document.getElementsByClassName("hatter");
						bg[0].style.opacity = "1.0";
						showVideo(1080);
					}, 1);
				}
			}, 5);*/
			document.getElementsByClassName("sponsorBg")[0].style.top = "0px";
			setTimeout(function () {
				var bg = document.getElementsByClassName("hatter");
				bg[0].style.opacity = "1.0";
				showVideo(1080)
			}, 1000);
		}

		var start = 1080;
		var differencetime = 10;
		var totaltime = 500;
		var showVideoTimeStamp = 1;
		var finish = 0;

		function showVideo(coordinate) {
			/*var videoIn = document.getElementsByClassName("arenaVidIn");
			var bg = document.getElementsByClassName("hatter");
			videoIn[0].play();
			bg[0].play();*/

			/*var equalDiff = start / (totaltime / differencetime);
			var toMove = coordinate - (equalDiff / 3.5) - (equalDiff * showVideoTimeStamp / 150);
			showVideoTimeStamp++;
	
			setTimeout(function () {
				if (coordinate >= 0) {
					var bg = document.getElementById("hatter");
					bg.style.top = toMove + "px";
					/*if (coordinate > 1080 / 2) {
						showVideo(coordinate - 27);
					}
					else if (coordinate > 1080 / 3) {
						showVideo(coordinate - 24);
					}
					else if (coordinate > 1080 / 5) {
						showVideo(coordinate - 20);
					}
					else {
						showVideo(coordinate - 17);
					}*/
			/*	showVideo(toMove);
			}
			else {
				if (coordinate < 0) {
					var bg = document.getElementById("hatter");
					bg.style.top = "0px";
				}
				setTimeout(showBackGround, 1);
			}
		}, 1);
	
*/
			var bg = document.getElementById("hatter");
			bg.style.top = "0px";
			setTimeout(showBackGround, 1000);
		}

		function showBackGround() {
			setTimeout(function () {
				var startCoordinate = -1300;
				showWinnerTeam(startCoordinate);
			}, 1);
		}

		function showWinnerTeam(coordinate) {
			document.getElementsByClassName("winnerline")[0].load();
			document.getElementsByClassName("winnerline")[0].style.opacity = "1.0";
			document.getElementsByClassName("winnerline")[0].play();
			setTimeout(function () {
				document.getElementsByClassName("winnertitleVod")[0].style.opacity = "1.0";
				document.getElementsByClassName("winnertitleVod")[0].play();
				moveWinningTeam(300, 300);
			}, 1200);
			/*setTimeout(function () {
				if (coordinate <= 0) {
					console.log(coordinate);
					document.getElementsByClassName("winnerline")[0].style.left = coordinate + "px";
					console.log(coordinate + " finished.");
					if (coordinate < -800) {
						showWinnerTeam(coordinate + 30);
					}
					else if (coordinate < -550) {
						showWinnerTeam(coordinate + 10);
					}
					else if (coordinate < -200) {
						showWinnerTeam(coordinate + 5);
					}
					else if (coordinate < -20) {
						showWinnerTeam(coordinate + 2);
					}
					else {
						showWinnerTeam(coordinate + 1);
					}
				}
				else {
					setTimeout(function () {
						document.getElementsByClassName("winnertitleVod")[0].play();
						moveWinningTeam(500, 500);
					}, 250);
				}
			}, 5);*/
			setTimeout(function () {
				showTeamName(0.0);
			}, 1900);

		}

		function showTeamName(opacity) {
			if (opacity <= 1.1) {
				setTimeout(function () {
					var teamName = document.getElementById("winnerTeamName");
					teamName.style.opacity = opacity;
					showTeamName(opacity + 0.01);
				}, 5);
			}
		}

		function moveWinningTeam(startCoordinate, coordinate) {
			/*setTimeout(function () {
				if (coordinate >= -100) {
					//console.log("Coordinate: " + coordinate);
					var difference = startCoordinate - coordinate;
					var percentage = (coordinate + 100) / (startCoordinate + 100) * 100;
					//console.log("Percentage: "+(100-percentage));
					var rectBottomPx = (100 - percentage) * 800 / 100;
					//console.log("RectBottomPixels: " + rectBottomPx + "px");
					document.getElementsByClassName("winnerteam")[0].style.top = coordinate + "px";
					document.getElementsByClassName("winnerteam")[0].style.clip = "rect(0px,800px," + rectBottomPx + "px,0px)";
					if (coordinate > 300) {
						moveWinningTeam(startCoordinate, coordinate - 13);
					}
					else if (coordinate > 180) {
						moveWinningTeam(startCoordinate, coordinate - 7);
					}
					else if (coordinate > 60) {
						moveWinningTeam(startCoordinate, coordinate - 3);
					}
					else if (coordinate > -40) {
						moveWinningTeam(startCoordinate, coordinate - 2);
					}
					else {
						moveWinningTeam(startCoordinate, coordinate - 1);
					}
				}
				else {
					setTimeout(function () {
						document.getElementsByClassName("winnertitle")[0].style.opacity = "1.0";
					}, 1000);
					setTimeout(function () {
						disappearEverything(100);
					}, 3000);
				}
			}, 5);*/
			document.getElementsByClassName("winnerteam")[0].style.opacity = "1.0";
			document.getElementsByClassName("winnerteam")[0].style.top = "-100px";
			document.getElementsByClassName("winnerteam")[0].style.clip = "rect(0px,800px,800px,0px)";
			setTimeout(function () {
				disappearEverything(100);
			}, 4000);
		}

		function disappearEverything(opacity) {
			setTimeout(function () {
				if (opacity >= 0) {
					var actualOpacity = opacity / 100.0;
					document.getElementsByClassName("winnerteam")[0].style.opacity = actualOpacity;
					document.getElementsByClassName("winnertitle")[0].style.opacity = actualOpacity;
					document.getElementsByClassName("winnerline")[0].style.opacity = actualOpacity;
					document.getElementsByClassName("winnertitleVod")[0].style.opacity = actualOpacity;
					document.getElementById("winnerTeamName").style.opacity = actualOpacity;
					disappearEverything(opacity - 1);
				}
				else {
					setTimeout(function () {
						bringHereTheStats(0.0);
					}, 150);
				}
			}, 5);
		}

		function bringHereTheStats(opacity) {
			document.getElementById("stats").style.opacity = "1.0";
			/*
			if (opacity <= 1.1) {
				setTimeout(function () {
					var teamName = document.getElementById("winnerTeamName");
					teamName.style.opacity = opacity;
					showTeamName(opacity + 0.01);
				}, 5);
			}
			*/
			/*if(opacity <= 1.1){
				setTimeout(function () {
					var stats = document.getElementById("stats");
					stats.style.opacity = opacity;
					bringHereTheStats(opacity + 0.01);
				}, 5);
			}*/
		}

		/*var startCoordinate = 110;
		setTimeout(function () {
			showBarUnder(startCoordinate - 1);
		}, 1000);*/

		/*var ws;

		function connect() {
			ws = new WebSocket('ws://127.0.0.1:4444');
			ws.onopen = function () {
				// subscribe to some channels
				ws.send('Final result');
				console.log('Connection established. I am Final result.html');
			};


			ws.onclose = function (e) {
				console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);
				setTimeout(function () {
					connect();
				}, 1000);
			};

			ws.onerror = function (err) {
				console.error('Socket encountered error: ', err.message, 'Closing socket');
				ws.close();
			};

			ws.onmessage = function (e) {
				var input = e.data;
				var input = e.data;
				var str = input.split("×");
				var fileDisplayArea = document.getElementById(str[0]);
				if (str[1] == "src") {
					fileDisplayArea.src = str[2];
				}
				else if (str[1] == "play") {
					fileDisplayArea.style.opacity = "1.0";
					fileDisplayArea.play();
				}
				else if (str[1] == "show") {
					fileDisplayArea.style.opacity = "1.0";
				}
				else if (str[1] == "disappear") {
					fileDisplayArea.style.opacity = "0.0";
				}
				else if (str[1] == "opacity") {
					fileDisplayArea.style.opacity = str[2];
				}
				else if (str[1] == "color") {
					fileDisplayArea.style.color = str[2];
				}
				else if (str[1] == "load") {
					fileDisplayArea.load();
				} else if (str[1] == "start") {
					var startCoordinate = 110;
					//ws.send("You can mute gameplay");
					setTimeout(function () {
						showBarUnder(startCoordinate - 1);
					}, 5000);
				}
				else if (str[1] == "videosource") {
					fileDisplayArea.src = str[2];
					fileDisplayArea.load();
					fileDisplayArea.play();
				}
				else if (str[1] == "left") {
					fileDisplayArea.style.left = str[2];
				} else if (str[1] == "top") {
					fileDisplayArea.style.top = str[2];
				}
				else if (str[1] == "clip") {
					fileDisplayArea.style.clip = str[2];
				}
				else if (str[1] == "stop") {
					fileDisplayArea.pause();
					fileDisplayArea.currentTime = 0;
				}
				else {
					fileDisplayArea.innerHTML = str[1];
				}
			};
		}

		connect();*/

		var startCoordinate = 110;
		//ws.send("You can mute gameplay");
		/*setTimeout(function () {
			showBarUnder(startCoordinate - 1);
		}, 5000);*/
		//showBarUnder(109);

		const settings = {
			'string': {
				'H2': 'blueName',
				'H3': 'orangeName',
				'H15': 'blueLogoPlace',
				'H16': 'orangeLogoPlace',
				'H5': 'blueWin',
				'H6': 'orangeWin',
				'H20': 'seriesType',
			},
			// "counter": {
			//     "A3": [
			//         "BlueSeries1",
			//         "BlueSeries2",
			//         "BlueSeries3",
			//         "BlueSeries4",
			//     ],
			//     "B3": [
			//         "OrangeSeries1",
			//         "OrangeSeries2",
			//         "OrangeSeries3",
			//         "OrangeSeries4",
			//     ]
			// },
			"image": {
				'H15': 'blueLogoSeriesId',
				'H16': 'orangeLogoSeriesId',
			}
		};

		// Define spreadsheet to use
		const spreadsheetID = '16vEZOMd2S9bhcTIHmD3HI8L2RV0M0PVoMf9XFnyN3Oo';

		// Select worksheet
		const worksheetName = 'Back End';

		// Specify the API key to use
		// (this is just a random string, it won't work okay)
		const apiKey = "AIzaSyCDAI-h6dPzUUo0XQt6SqtzZ5Vq-z3wGs8";

		// Update the overlay every 3 seconds
		const updateInterval = 1000;

		// Pass those values into a new GraphicsUpdater object
		// The code will deal with it from here
		const u = new GraphicsUpdater(settings, spreadsheetID, worksheetName, apiKey, updateInterval, false);

		// Import operation preset
		u.addOperation('regex', regexOperation);

		// With u fully configured, start it updating.
		u.startUpdating();

		startChecking();

		var arenas = [];

		function startChecking() {
			setTimeout(function () {
				arenas = [document.getElementById("game1").innerHTML, document.getElementById("game2").innerHTML, document.getElementById("game3").innerHTML, document.getElementById("game4").innerHTML, document.getElementById("game5").innerHTML, document.getElementById("game6").innerHTML, document.getElementById("game7").innerHTML];
				blueWin = Number(document.getElementById("blueWin").innerHTML);
				orangeWin = Number(document.getElementById("orangeWin").innerHTML);

				startChecking();
			}, 1000);
		}

		function sum(array) {
			let retVal = 0;
			for (let i = 0; i < array.length; i++) {
				retVal = retVal + array[i];
			}
			return retVal;
		}

		function max(array) {
			let min = 0;
			for (let i = 0; i < array.length; i++) {
				if (array[i] > min) {
					min = array[i];
				}
			}
			return min;
		}
	</script>

	<div class="excelSettings">
		<div id="blueName">0</div>
		<div id="orangeName">0</div>
		<div id="blueLogoPlace">0</div>
		<div id="orangeLogoPlace">0</div>
		<div id="game1">0</div>
		<div id="game2">0</div>
		<div id="game3">0</div>
		<div id="game4">0</div>
		<div id="game5">0</div>
		<div id="game6">0</div>
		<div id="game7">0</div>
		<div id="blueWin">0</div>
		<div id="orangeWin">0</div>
	</div>
</body>

</html>